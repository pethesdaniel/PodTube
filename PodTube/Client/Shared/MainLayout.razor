@using PodTube.Client.Services;
@using PodTube.Shared.Models.DTO;
@inherits LayoutComponentBase
@inject NavigationManager Navigator
@inject UserService userService

<MudThemeProvider/>
<MudDialogProvider/>
<MudSnackbarProvider/>

<MudLayout>
    <MudAppBar Elevation="1">
        <MenuBar OnHomeButton="@(()=>Navigator.NavigateTo("/"))"
            OnChannelsButton="@(()=>Navigator.NavigateTo("/channels"))"
            OnApiButton="@(()=>Navigator.NavigateTo("/swagger/index.html", forceLoad: true))"
            User="user"
        ></MenuBar>
    </MudAppBar>
    <MudMainContent>
        @Body
    </MudMainContent>
</MudLayout>

@code {
    private UserDto? user = null;

    protected override async Task OnInitializedAsync() {
        await base.OnInitializedAsync();
        user = await userService.GetUser();
    }
}
